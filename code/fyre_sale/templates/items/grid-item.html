{% load static %}

<a href="{% url 'item_detail' item.id %}" class="grid-item-link">
  <div class="grid-item">
    <img class="grid-item-image" id="grid-item-image-{{ item.id }}">
    <div class="name-price-wrapper">
      <p class="grid-item-name">{{ item.name }}</p>
      <p class="grid-item-price">{{ item.cur_bid }} kr.</p>
    </div>
  </div>
</a>

<script type="text/javascript">
  window.addEventListener('load', () => {
    fetch('http://localhost:8000/items/api/get_images/{{ item.id }}')
      .then(response => response.json())
      .then(data => {
        let imageElem = document.getElementById('grid-item-image-{{ item.id }}');
        imageElem.src = '{{MEDIA_URL}}/images/' + data.results[0].image;
      });
  });
</script>
